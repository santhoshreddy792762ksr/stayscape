<% layout("/layouts/boilerplate") %>

<style>
  body, html {
    height: 100%;
    background: #f0f2f5;
  }
  .login-wrapper {
    min-height: 100vh;
  }
</style>

<div class="container login-wrapper d-flex justify-content-center align-items-center">
  <div class="col-md-6 col-lg-5 col-xl-4">
    <div class="card shadow-lg rounded-4">
      <div class="card-header bg-primary text-white text-center py-3">
        <h3 class="mb-0"><i class="bi bi-person-circle me-2"></i>Login to StayScape</h3>
      </div>

      <div class="card-body p-4">

        <% if (error && error.length) { %>
          <div class="alert alert-danger alert-dismissible fade show">
            <i class="bi bi-exclamation-triangle-fill me-2"></i>
            <strong>Error:</strong> <%= error %>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        <% } %>

        <% if (success && success.length) { %>
          <div class="alert alert-success alert-dismissible fade show">
            <i class="bi bi-check-circle-fill me-2"></i>
            <strong>Success:</strong> <%= success %>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        <% } %>

        <form action="/login" method="POST" class="needs-validation" novalidate>
          <div class="mb-3">
            <label for="username" class="form-label">Username</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-person-fill"></i></span>
              <input
                type="text"
                class="form-control <%= error && (error.includes('username') || error.includes('Invalid')) ? 'is-invalid' : '' %>"
                id="username"
                name="username"
                required
                value="<%= formData && formData.username ? formData.username : '' %>"
              >
            </div>
            <% if (error && (error.includes('username') || error.includes('Invalid'))) { %>
              <div class="invalid-feedback d-block">
                <i class="bi bi-exclamation-circle"></i> <%= error %>
              </div>
            <% } %>
          </div>

          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-lock-fill"></i></span>
              <input
                type="password"
                class="form-control <%= error && error.includes('password') ? 'is-invalid' : '' %>"
                id="password"
                name="password"
                required
              >
            </div>
            <% if (error && error.includes('password')) { %>
              <div class="invalid-feedback d-block">
                <i class="bi bi-exclamation-circle"></i> <%= error %>
              </div>
            <% } %>
          </div>

          <div class="d-grid mb-3">
            <button type="submit" class="btn btn-primary btn-lg">
              <i class="bi bi-box-arrow-in-right"></i> Login
            </button>
          </div>

          <div class="text-center">
            <a href="/forgot-password" class="text-decoration-none">Forgot Password?</a>
          </div>
        </form>
      </div>

      <div class="card-footer text-center py-3">
        <p class="mb-0">New to StayScape? <a href="/signup" class="text-primary fw-semibold">Create Account</a></p>
      </div>
    </div>
  </div>
</div>
